<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<meta name='viewport' content='width=device-width,maximum-scale=1.0,initial-scale=1.0,user-scalable=no'/>
<meta name='format-detection' content='telephone=no'/>
<meta name='format-detection' content='address=no'>
<title></title>



<style>
* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}
</style>

<script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
<script>
// Отправляет событие инициализации нативному клиенту
vkBridge.send('VKWebAppInit');
</script>

</head>
<body>
<center>



<div id='main' style='padding: 0px 0px 0px 0px; background:#000; width:360px; overflow:;'>
<div id='content' style='position:relative; padding: 0px 0px 0px 0px;'>


<iframe src="iframe.html" width="360" "></iframe>

<div id='main_pic' class='' style='margin: 0px 0px 0px 0px; background: url(Flux_Dev_a_cinematic_anime_keyframe_with_a_mix_of_styles_from__1.jpg), #000; background-size:100% 100%; padding: 0px; box-sizing:border-box; position:relative; height: 720px; height: 70px; width: 100%; z-index:2; '></div>

	
<!-- Put this script tag to the <head> of your page -->
<script type="text/javascript" src="https://vk.com/js/api/openapi.js?168"></script>
<script type="text/javascript">
  VK.init({ apiId: 54230573, onlyWidgets: true });
</script>

<!-- Put this div tag to the place, where the Comments block will be -->
<div id="vk_comments"></div>
<script type="text/javascript">
VK.Widgets.Comments("vk_comments", {limit: 5, attach: "false",}, 12345);
</script>

<script>
VK.Observer.subscribe("widgets.comments.delete_comment", function f() {
    console.log('Комментарий удален!');
});
	
VK.Observer.subscribe("widgets.comments.new_comment", function(num, last_comment, date, sign) {
    console.log('Добавлен новый комментарий!');
    console.log('Количество комментариев:', num);
    console.log('Текст комментария:', last_comment);
    console.log('Дата:', date);
    console.log('Подпись:', sign);
});







// Простой перехватчик для ошибок с newCnt
(function() {
  const originalError = console.error;
  
  console.error = function(...args) {
    // Вызываем оригинальный метод
    originalError.apply(this, args);
    
    // Проверяем наличие нужной ошибки
    const errorText = args[0];
    if (typeof errorText === 'string' && 
        errorText.includes('VK error: Notify error: newCnt is not defined')) {
      
      // Извлекаем page из URL
      const urlParams = new URLSearchParams(window.location.search);
      const page = urlParams.get('page');
      
      if (page) {
        console.log(`[VK Error Monitor] Обнаружена ошибка newCnt для page=${page}`);
        console.log(`[VK Error Monitor] Полный URL: ${window.location.href}`);
      }
    }
  };
  
  // Логируем текущий page при загрузке
  const urlParams = new URLSearchParams(window.location.search);
  const initialPage = urlParams.get('page');
  if (initialPage) {
    console.log(`[VK Error Monitor] Инициализирован для page=${initialPage}`);
  }
})();





	
</script>



</center>
</body>

</html>


















